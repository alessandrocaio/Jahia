<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"
         version="2.4" id="WebApp_Jahia">

    <display-name>Jahia</display-name>

    <context-param>
    	<description>Required on IBM WebSphere 6.1 to disable deployment into a built-in portlet container and allow deployment into a custom portlet container (Pluto)</description>
        <param-name>com.ibm.websphere.portletcontainer.PortletDeploymentEnabled</param-name>
        <param-value>false</param-value>
    </context-param>
    
    <context-param>
        <description>
            The location of Spring's configuration files used by the listener upon startup
            of the web application
        </description>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath*:org/jahia/defaults/config/**/applicationcontext-*.xml,classpath*:org/jahia/defaults/config/**/applicationcontext-override-*.xml,WEB-INF/etc/spring/**/applicationcontext-*.xml,WEB-INF/etc/spring/**/applicationcontext-override-*.xml,classpath*:org/jahia/config/**/applicationcontext-*.xml,classpath*:org/jahia/config/**/applicationcontext-override-*.xml</param-value>
    </context-param>

    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/etc/config/log4j.xml</param-value>
    </context-param>
    <context-param>
        <param-name>log4jRefreshInterval</param-name>
        <param-value>60000</param-value>
    </context-param>

    <filter>
    	<description>
	      The following filter to use SPNEGO authentication is
	      configured in applicationcontext-spnego.xml.
	      It can be enabled in the jahia.advanced.properties.
    	</description>
        <filter-name>SpnegoHttpFilter</filter-name>
        <filter-class>org.jahia.bin.filters.FallbackDelegatingFilterProxy</filter-class>
    </filter>

    <filter>
        <filter-name>JcrSessionFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter>
    	<filter-name>UrlRewriteFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>renderApplicationContextAttribute</param-name>
            <param-value>org.springframework.web.servlet.FrameworkServlet.CONTEXT.RendererDispatcherServlet</param-value>
        </init-param>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
        <description>Error logging and e-mail alert filter</description>
        <filter-name>ErrorLoggingFilter</filter-name>
        <filter-class>org.jahia.bin.errors.ErrorLoggingFilter</filter-class>
    </filter>

    <filter>
        <description>Fires Jahia errorOccurred event</description>
        <filter-name>ErrorEventFilter</filter-name>
        <filter-class>org.jahia.bin.errors.ErrorEventFilter</filter-class>
        <init-param>
            <description>
                The minimal error response code to fire an event.
                For example the value 500 will only fire errorOccurred event for critical events.
                In case the value is set to 400, also the "bad request", "unauthorized", "forbidden", "resource not found" errors will be reported 
            </description>
            <param-name>minimalErrorCode</param-name>
            <param-value>500</param-value>
        </init-param>
    </filter>
    
    <filter>
    	<description>Sets request character encoding if it is not set already</description>
    	<filter-name>CharacterEncodingFilter</filter-name>
    	<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    	<init-param>
    		<description>Which encoding should we set?</description>
    		<param-name>encoding</param-name>
    		<param-value>UTF-8</param-value>
    	</init-param>
    </filter>
    
    <filter>
        <filter-name>ShindigAuthFilter</filter-name>
        <filter-class>org.jahia.bin.filters.FallbackDelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
        <init-param>
            <param-name>contextAttribute</param-name>
            <param-value>org.springframework.web.context.WebApplicationContext.jahiaModules</param-value>
        </init-param>
    </filter>

    <filter>
        <filter-name>shiroFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
    	<description>Allows temporary disabling request serving and switching to a maintenance mode.</description>
        <filter-name>MaintenanceFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter>
        <filter-name>LicenseFilter</filter-name>
        <filter-class>org.jahia.bin.filters.FallbackDelegatingFilterProxy</filter-class>
        <init-param>
            <param-name>targetFilterLifecycle</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
        <description>Protects access to the content manager and content picker by enforcing permission checks and validating parameters.</description>
        <filter-name>ContentManagerAccessCheckFilter</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    
	<filter-mapping>
		<filter-name>MaintenanceFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping> 

	<filter-mapping>
		<filter-name>LicenseFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping> 

    <filter-mapping>
        <filter-name>shiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>SpnegoHttpFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>JcrSessionFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
       <filter-name>UrlRewriteFilter</filter-name>
       <url-pattern>/*</url-pattern>
       <dispatcher>REQUEST</dispatcher>
       <dispatcher>FORWARD</dispatcher>
       <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <filter-mapping>
        <filter-name>ErrorLoggingFilter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <filter-mapping>
        <filter-name>ErrorEventFilter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>
    
    <filter-mapping>
        <filter-name>ContentManagerAccessCheckFilter</filter-name>
        <url-pattern>/engines/contentpicker.jsp</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>ContentManagerAccessCheckFilter</filter-name>
        <url-pattern>/engines/manager.jsp</url-pattern>
    </filter-mapping>
    
<!-- Shindig filter mappings -->
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/social/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/gadgets/ifr</url-pattern>
    </filter-mapping>
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/gadgets/makeRequest</url-pattern>
    </filter-mapping>
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/gadgets/api/rpc/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/gadgets/api/rest/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/rpc/*</url-pattern>
    </filter-mapping>
    <filter-mapping>
      <filter-name>ShindigAuthFilter</filter-name>
      <url-pattern>/rest/*</url-pattern>
    </filter-mapping>
<!-- End of Shindig filter mappings -->   

    <listener>
        <listener-class>org.jahia.bin.listeners.InitLoggingConfigListener</listener-class>
    </listener>
    
    <listener>
        <listener-class>org.jahia.bin.listeners.JahiaContextLoaderListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.jahia.bin.listeners.ShutdownLoggingConfigListener</listener-class>
    </listener>

    <listener>
        <listener-class>org.jahia.ajax.gwt.content.server.GWTFileManagerUploadServlet</listener-class>
    </listener>
<!--
    <listener>
        <listener-class>org.jahia.osgi.http.bridge.StartupListener</listener-class>
    </listener>
-->
    <servlet>
        <servlet-name>Jahia</servlet-name>
        <servlet-class>org.jahia.bin.Jahia</servlet-class>
        <!-- if you have trouble with the JDK detection code, you might want
             to remove the following parameter. Please note that this is here
             for a reason, and the versions below are the ones we recommend.
        -->
        <init-param>
            <param-name>supported_jdk_versions</param-name>
            <param-value>1.5 &lt;= x &lt; 1.8</param-value>
        </init-param>
        <load-on-startup>8</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>WelcomeServlet</servlet-name>
        <servlet-class>org.jahia.bin.WelcomeServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- R E P O S I T O R Y   S E R V L E T                                    -->
    <!-- ====================================================================== -->
    <servlet>
        <description>
            This servlet provides other servlets and jsps a common way to access
            the repository. The repository can be accessed via JNDI, RMI or Webdav.
        </description>
        <servlet-name>Repository</servlet-name>
        <servlet-class>org.apache.jackrabbit.j2ee.RepositoryAccessServlet</servlet-class>


        <init-param>
            <description>Repository Name that is used to retrieve it via a servlet context attribute</description>
            <param-name>repository.context.attribute.name</param-name>
            <param-value>uch</param-value>
        </init-param>

        <!--
        <init-param>
            <description>Repository Name that is used to retrieve it via JNDI</description>
            <param-name>repository-name</param-name>
            <param-value>java:comp/env/jcr/repository</param-value>
        </init-param>
        -->
        <!--
        <init-param>
            <param-name>missing-auth-mapping</param-name>
            <param-value>anonymous:anonymous</param-value>
            <description>
                Defines how a missing authorization header should be handled.
                1) if this init-param is missing, a 401 response is generated.
                   This is suiteable for clients (eg. webdav clients) for which
                   sending a proper authorization header is not possible, if the
                   server never sended a 401.
                2) if this init-param is present, but with an empty value,
                   null-credentials are returned, thus forcing an null login
                   on the repository
                3) if this init-param has a 'user:password' value, the respective
                   simple credentials are generated.
            </description>
        </init-param>
        -->

        <!--
            JNDI environment variables for creating the initial context
            (all init parameters starting with java.naming.* will be added to the initial context environment).
        -->
        <!--
        <init-param>
            <param-name>java.naming.provider.url</param-name>
            <param-value></param-value>
        </init-param>
        -->
        <!--
            RMI url, if RMI remoting is needed
        -->
        <!--
        <init-param>
            <param-name>rmi-uri</param-name>
            <param-value>///jackrabbit.repository</param-value>
            <description>The URI for the RMI connection.</description>
        </init-param>
        -->

        <load-on-startup>3</load-on-startup>
    </servlet>


    <!-- ====================================================================== -->
    <!-- W E B D A V  S E R V L E T                                              -->
    <!-- ====================================================================== -->
    <servlet>
        <description>
            The webdav servlet that connects HTTP request to the repository.
        </description>
        <servlet-name>Webdav</servlet-name>
        <servlet-class>org.apache.jackrabbit.j2ee.JahiaWebdavServlet</servlet-class>
        <init-param>
            <description>
                defines the prefix for spooling resources out of the repository.
            </description>
            <param-name>resource-path-prefix</param-name>
            <param-value>/repository</param-value>
        </init-param>
        <!--
            Optional parameter to define the value of the 'WWW-Authenticate' header
        -->
        <!--
        <init-param>
            <param-name>authenticate-header</param-name>
            <param-value>Basic realm="Jackrabbit Webdav Server"</param-value>
            <description>
                Defines the value of the 'WWW-Authenticate' header.
            </description>
        </init-param>
        -->
        <!--
            Parameter used to configure behaviour of webdav resources such as:
            - destinction between collections and non-collections
            - resource filtering
        -->
        <init-param>
            <description>
                Defines various dav-resource configuration parameters.
            </description>
            <param-name>resource-config</param-name>
            <param-value>/WEB-INF/etc/repository/jackrabbit/webdav-config.xml</param-value>
        </init-param>
        <load-on-startup>4</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>Files</servlet-name>
        <servlet-class>org.jahia.services.content.files.FileServlet</servlet-class>
        <load-on-startup>99</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>JahiaAdministration</servlet-name>
        <servlet-class>org.jahia.bin.JahiaAdministration</servlet-class>
        <load-on-startup>7</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>ValidateTicket</servlet-name>
        <servlet-class>org.jahia.bin.ValidateTicket</servlet-class>
    </servlet>

    <servlet>
        <servlet-name>fileManagerGWTUploadService</servlet-name>
        <servlet-class>
            org.jahia.ajax.gwt.content.server.GWTFileManagerUploadServlet
        </servlet-class>
    </servlet>

    <servlet>
        <servlet-name>JspPrecompileServlet</servlet-name>
        <servlet-class>org.jahia.tools.precompile.JspPrecompileServlet</servlet-class>
    </servlet>

    <servlet>
        <description>
            Error pages servlet, which selects the most appropriate error page to display,
            depending on the error code, parameters, site-specific pages flag (jahia.properties)
            and availability of error pages in the template set (otherwise a fallback to standard
            error pages is done).
        </description>
        <servlet-name>ErrorServlet</servlet-name>
        <servlet-class>org.jahia.bin.errors.ErrorServlet</servlet-class>
    </servlet>

    <!-- ====================================================================== -->
    <!-- P O R T L E T   S E R V L E T S                                        -->
    <!-- ====================================================================== -->
    <servlet>
        <servlet-name>JahiaContentPortlet</servlet-name>
        <servlet-class>org.jahia.portlets.PortletServlet</servlet-class>
        <load-on-startup>10</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>GWTDispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/etc/spring/servlet-applicationcontext-gwt*.xml,classpath*:org/jahia/defaults/config/**/servlet-applicationcontext-gwt*.xml</param-value>
        </init-param>
        <init-param>
            <param-name>publishEvents</param-name>
            <param-value>false</param-value>
        </init-param>
    </servlet>

    <servlet>
        <servlet-name>RendererDispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>WEB-INF/etc/spring/servlet-applicationcontext-renderer*.xml,classpath*:org/jahia/defaults/config/**/servlet-applicationcontext-renderer*.xml</param-value>
        </init-param>
        <init-param>
            <param-name>publishEvents</param-name>
            <param-value>false</param-value>
        </init-param>
    </servlet>
    
    <servlet>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
        	<param-name>contextAttribute</param-name>
        	<param-value>org.springframework.web.context.WebApplicationContext.jahiaModules</param-value>
        </init-param>
    </servlet>
    
<!-- Quercus PHP servlet -->
    <servlet>
        <servlet-name>Quercus Servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextAttribute</param-name>
            <param-value>org.springframework.web.context.WebApplicationContext.jahiaModules</param-value>
        </init-param>
    </servlet>
<!-- End of Quercus PHP servlet -->

    <!-- OSGi Proxy Servlet -->
<!--
    <servlet>
        <servlet-name>osgiProxy</servlet-name>
        <servlet-class>org.apache.felix.http.proxy.ProxyServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>    
-->

    <!-- This servlet is used to indicate the end of the initialization process of Jahia, so it should always have
         the highest load-on-startup value. This servlet may also be queried to check if the server has completed
         initialization or not. -->
    <servlet>
        <servlet-name>initializationCompletedServlet</servlet-name>
        <servlet-class>org.jahia.bin.EndInit</servlet-class>
        <load-on-startup>999</load-on-startup>
    </servlet>

    <!-- Servlet mappings -->
    <servlet-mapping>
        <servlet-name>WelcomeServlet</servlet-name>
        <url-pattern>/start</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>WelcomeServlet</servlet-name>
        <url-pattern>/welcome</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>WelcomeServlet</servlet-name>
        <url-pattern>/welcome/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>JahiaAdministration</servlet-name>
        <url-pattern>/administration/*</url-pattern>
    </servlet-mapping>
    
    <servlet-mapping>
        <servlet-name>ValidateTicket</servlet-name>
        <url-pattern>/validateTicket</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>fileManagerGWTUploadService</servlet-name>
        <url-pattern>/gwt/fileupload/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Webdav</servlet-name>
        <url-pattern>/repository/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Files</servlet-name>
        <url-pattern>/files/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>JspPrecompileServlet</servlet-name>
        <url-pattern>/tools/precompileServlet</url-pattern>
    </servlet-mapping>


    <servlet-mapping>
        <servlet-name>JahiaContentPortlet</servlet-name>
        <url-pattern>/PlutoInvoker/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>ErrorServlet</servlet-name>
        <url-pattern>/error</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>GWTDispatcherServlet</servlet-name>
        <url-pattern>*.gwt</url-pattern>
    </servlet-mapping>
    
    <servlet-mapping>
        <servlet-name>RendererDispatcherServlet</servlet-name>
        <url-pattern>/cms/*</url-pattern>
    </servlet-mapping>

<!-- Shindig servlet mappings -->
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/js/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/proxy/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/makeRequest</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/rpc/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/api/rpc/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/social/rpc/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/api/rest/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/social/rest/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/concat</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/oauthcallback</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/ifr</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/accel</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/gadgets/metadata</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ShindigDispatcherServlet</servlet-name>
        <url-pattern>/oauth/*</url-pattern>
    </servlet-mapping>
<!-- End of Shindig servlet mappings -->

<!-- Quercus PHP mapping -->
    <servlet-mapping>
        <servlet-name>Quercus Servlet</servlet-name>
        <url-pattern>*.php</url-pattern>
    </servlet-mapping>

<!--
    <servlet-mapping>
        <servlet-name>osgiProxy</servlet-name>
        <url-pattern>/osgi/*</url-pattern>
    </servlet-mapping>
-->

    <servlet-mapping>
        <servlet-name>initializationCompletedServlet</servlet-name>
        <url-pattern>/initializationCompleted/*</url-pattern>
    </servlet-mapping>

    <!-- Session timeout value is set in minutes. Comment this section out
         in order to set the timeout time back to the server's value  -->
    <!--
    <session-config>
      <session-timeout>1</session-timeout>
    </session-config>
    -->

    <!-- ===================== Default MIME Type Mappings =================== -->


    <!-- When serving static resources, Tomcat will automatically generate    -->
    <!-- a "Content-Type" header based on the resource's filename extension,  -->
    <!-- based on these mappings.  Additional mappings can be added here (to  -->
    <!-- apply to all web applications), or in your own application's web.xml -->
    <!-- deployment descriptor.                                               -->
    <mime-mapping>
        <extension>abs</extension>
        <mime-type>audio/x-mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ai</extension>
        <mime-type>application/postscript</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>aif</extension>
        <mime-type>audio/x-aiff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>aifc</extension>
        <mime-type>audio/x-aiff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>aiff</extension>
        <mime-type>audio/x-aiff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>aim</extension>
        <mime-type>application/x-aim</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>art</extension>
        <mime-type>image/x-jg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>asf</extension>
        <mime-type>video/x-ms-asf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>asx</extension>
        <mime-type>video/x-ms-asf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>au</extension>
        <mime-type>audio/basic</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>avi</extension>
        <mime-type>video/x-msvideo</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>avx</extension>
        <mime-type>video/x-rad-screenplay</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>bcpio</extension>
        <mime-type>application/x-bcpio</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>bin</extension>
        <mime-type>application/octet-stream</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>bmp</extension>
        <mime-type>image/bmp</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>body</extension>
        <mime-type>text/html</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>cdf</extension>
        <mime-type>application/x-cdf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>cer</extension>
        <mime-type>application/x-x509-ca-cert</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>class</extension>
        <mime-type>application/java</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>cpio</extension>
        <mime-type>application/x-cpio</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>csh</extension>
        <mime-type>application/x-csh</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>css</extension>
        <mime-type>text/css</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>dib</extension>
        <mime-type>image/bmp</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>doc</extension>
        <mime-type>application/msword</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>docx</extension>
        <mime-type>application/vnd.openxmlformats-officedocument.wordprocessingml.document</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>dot</extension>
        <mime-type>application/msword</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>dtd</extension>
        <mime-type>application/xml-dtd</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>dv</extension>
        <mime-type>video/x-dv</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>dvi</extension>
        <mime-type>application/x-dvi</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>eps</extension>
        <mime-type>application/postscript</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>etx</extension>
        <mime-type>text/x-setext</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>exe</extension>
        <mime-type>application/octet-stream</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>gif</extension>
        <mime-type>image/gif</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>gtar</extension>
        <mime-type>application/x-gtar</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>gz</extension>
        <mime-type>application/x-gzip</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>hdf</extension>
        <mime-type>application/x-hdf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>htc</extension>
        <mime-type>text/x-component</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>htm</extension>
        <mime-type>text/html</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>html</extension>
        <mime-type>text/html</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>hqx</extension>
        <mime-type>application/mac-binhex40</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ico</extension>
        <mime-type>image/x-icon</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ief</extension>
        <mime-type>image/ief</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jad</extension>
        <mime-type>text/vnd.sun.j2me.app-descriptor</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jar</extension>
        <mime-type>application/java-archive</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>java</extension>
        <mime-type>text/plain</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jnlp</extension>
        <mime-type>application/x-java-jnlp-file</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jpe</extension>
        <mime-type>image/jpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jpeg</extension>
        <mime-type>image/jpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jpg</extension>
        <mime-type>image/jpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>js</extension>
        <mime-type>text/javascript</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jsf</extension>
        <mime-type>text/plain</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>jspf</extension>
        <mime-type>text/plain</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>kar</extension>
        <mime-type>audio/x-midi</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>latex</extension>
        <mime-type>application/x-latex</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>m3u</extension>
        <mime-type>audio/x-mpegurl</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mac</extension>
        <mime-type>image/x-macpaint</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>man</extension>
        <mime-type>application/x-troff-man</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mathml</extension>
        <mime-type>application/mathml+xml</mime-type> 
    </mime-mapping>
    <mime-mapping>
        <extension>me</extension>
        <mime-type>application/x-troff-me</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mid</extension>
        <mime-type>audio/x-midi</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>midi</extension>
        <mime-type>audio/x-midi</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mif</extension>
        <mime-type>application/x-mif</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mov</extension>
        <mime-type>video/quicktime</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>movie</extension>
        <mime-type>video/x-sgi-movie</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mp1</extension>
        <mime-type>audio/x-mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mp2</extension>
        <mime-type>audio/x-mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mp3</extension>
        <mime-type>audio/x-mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mp4</extension>
        <mime-type>video/mp4</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mpa</extension>
        <mime-type>audio/x-mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mpe</extension>
        <mime-type>video/mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mpeg</extension>
        <mime-type>video/mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mpega</extension>
        <mime-type>audio/x-mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mpg</extension>
        <mime-type>video/mpeg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>mpv2</extension>
        <mime-type>video/mpeg2</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ms</extension>
        <mime-type>application/x-wais-source</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>nc</extension>
        <mime-type>application/x-netcdf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>oda</extension>
        <mime-type>application/oda</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Database -->
        <extension>odb</extension>
        <mime-type>application/vnd.oasis.opendocument.database</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Chart -->
        <extension>odc</extension>
        <mime-type>application/vnd.oasis.opendocument.chart</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Formula -->
        <extension>odf</extension>
        <mime-type>application/vnd.oasis.opendocument.formula</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Drawing -->
        <extension>odg</extension>
        <mime-type>application/vnd.oasis.opendocument.graphics</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Image -->
        <extension>odi</extension>
        <mime-type>application/vnd.oasis.opendocument.image</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Master Document -->
        <extension>odm</extension>
        <mime-type>application/vnd.oasis.opendocument.text-master</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Presentation -->
        <extension>odp</extension>
        <mime-type>application/vnd.oasis.opendocument.presentation</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Spreadsheet -->
        <extension>ods</extension>
        <mime-type>application/vnd.oasis.opendocument.spreadsheet</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Text -->
        <extension>odt</extension>
        <mime-type>application/vnd.oasis.opendocument.text</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ogg</extension>
        <mime-type>application/ogg</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Drawing Template -->
        <extension>otg </extension>
        <mime-type>application/vnd.oasis.opendocument.graphics-template</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- HTML Document Template -->
        <extension>oth</extension>
        <mime-type>application/vnd.oasis.opendocument.text-web</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Presentation Template -->
        <extension>otp</extension>
        <mime-type>application/vnd.oasis.opendocument.presentation-template</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Spreadsheet Template -->
        <extension>ots</extension>
        <mime-type>application/vnd.oasis.opendocument.spreadsheet-template </mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- OpenDocument Text Template -->
        <extension>ott</extension>
        <mime-type>application/vnd.oasis.opendocument.text-template</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pbm</extension>
        <mime-type>image/x-portable-bitmap</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pct</extension>
        <mime-type>image/pict</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pdf</extension>
        <mime-type>application/pdf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pgm</extension>
        <mime-type>image/x-portable-graymap</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pic</extension>
        <mime-type>image/pict</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pict</extension>
        <mime-type>image/pict</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pls</extension>
        <mime-type>audio/x-scpls</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>png</extension>
        <mime-type>image/png</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pnm</extension>
        <mime-type>image/x-portable-anymap</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pnt</extension>
        <mime-type>image/x-macpaint</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pot</extension>
        <mime-type>application/vnd.ms-powerpoint</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ppm</extension>
        <mime-type>image/x-portable-pixmap</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pps</extension>
        <mime-type>application/vnd.ms-powerpoint</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ppt</extension>
        <mime-type>application/vnd.ms-powerpoint</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>pptx</extension>
        <mime-type>application/vnd.openxmlformats-officedocument.presentationml.presentation</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ppz</extension>
        <mime-type>application/vnd.ms-powerpoint</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ps</extension>
        <mime-type>application/postscript</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>psd</extension>
        <mime-type>image/x-photoshop</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>qt</extension>
        <mime-type>video/quicktime</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>qti</extension>
        <mime-type>image/x-quicktime</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>qtif</extension>
        <mime-type>image/x-quicktime</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ras</extension>
        <mime-type>image/x-cmu-raster</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>rdf</extension>
        <mime-type>application/rdf+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>rgb</extension>
        <mime-type>image/x-rgb</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>rm</extension>
        <mime-type>application/vnd.rn-realmedia</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>roff</extension>
        <mime-type>application/x-troff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>rtf</extension>
        <mime-type>application/rtf</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>rtx</extension>
        <mime-type>text/richtext</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>sh</extension>
        <mime-type>application/x-sh</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>shar</extension>
        <mime-type>application/x-shar</mime-type>
    </mime-mapping>
<!--
    <mime-mapping>
        <extension>shtml</extension>
        <mime-type>text/x-server-parsed-html</mime-type>
    </mime-mapping>
-->
    <mime-mapping>
        <extension>smf</extension>
        <mime-type>audio/x-midi</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>sit</extension>
        <mime-type>application/x-stuffit</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>snd</extension>
        <mime-type>audio/basic</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>src</extension>
        <mime-type>application/x-wais-source</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>sv4cpio</extension>
        <mime-type>application/x-sv4cpio</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>sv4crc</extension>
        <mime-type>application/x-sv4crc</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>svg</extension>
        <mime-type>image/svg+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>svgz</extension>
        <mime-type>image/svg+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>swf</extension>
        <mime-type>application/x-shockwave-flash</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>t</extension>
        <mime-type>application/x-troff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tar</extension>
        <mime-type>application/x-tar</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tcl</extension>
        <mime-type>application/x-tcl</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tex</extension>
        <mime-type>application/x-tex</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>texi</extension>
        <mime-type>application/x-texinfo</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>texinfo</extension>
        <mime-type>application/x-texinfo</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tif</extension>
        <mime-type>image/tiff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tiff</extension>
        <mime-type>image/tiff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tr</extension>
        <mime-type>application/x-troff</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>tsv</extension>
        <mime-type>text/tab-separated-values</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>txt</extension>
        <mime-type>text/plain</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ulw</extension>
        <mime-type>audio/basic</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>ustar</extension>
        <mime-type>application/x-ustar</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>vrml</extension>
        <mime-type>model/vrml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>vsd</extension>
        <mime-type>application/x-visio</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>vxml</extension>
        <mime-type>application/voicexml+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xbm</extension>
        <mime-type>image/x-xbitmap</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xht</extension>
        <mime-type>application/xhtml+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xhtml</extension>
        <mime-type>application/xhtml+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xlc</extension>
        <mime-type>application/vnd.ms-excel</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xll</extension>
        <mime-type>application/vnd.ms-excel</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xlm</extension>
        <mime-type>application/vnd.ms-excel</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xls</extension>
        <mime-type>application/vnd.ms-excel</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xlsx</extension>
        <mime-type>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xml</extension>
        <mime-type>application/xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xpm</extension>
        <mime-type>image/x-xpixmap</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xsl</extension>
        <mime-type>application/xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xslt</extension>
        <mime-type>application/xslt+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xul</extension>
        <mime-type>application/vnd.mozilla.xul+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>xwd</extension>
        <mime-type>image/x-xwindowdump</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>wav</extension>
        <mime-type>audio/x-wav</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- Wireless Bitmap -->
        <extension>wbmp</extension>
        <mime-type>image/vnd.wap.wbmp</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- WML Source -->
        <extension>wml</extension>
        <mime-type>text/vnd.wap.wml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- Compiled WML -->
        <extension>wmlc</extension>
        <mime-type>application/vnd.wap.wmlc</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- WML Script Source -->
        <extension>wmls</extension>
        <mime-type>text/vnd.wap.wmlscript</mime-type>
    </mime-mapping>
    <mime-mapping>
        <!-- Compiled WML Script -->
        <extension>wmlscriptc</extension>
        <mime-type>application/vnd.wap.wmlscriptc</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>wmv</extension>
        <mime-type>video/x-ms-wmv</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>wrl</extension>
        <mime-type>x-world/x-vrml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>wspolicy</extension>
        <mime-type>application/wspolicy+xml</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>Z</extension>
        <mime-type>application/x-compress</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>z</extension>
        <mime-type>application/x-compress</mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>zip</extension>
        <mime-type>application/zip</mime-type>
    </mime-mapping>

    <welcome-file-list>
        <welcome-file>welcome</welcome-file>
    </welcome-file-list>

    <error-page>
        <error-code>400</error-code>
        <location>/error</location>
    </error-page>

    <error-page>
        <error-code>401</error-code>
        <location>/error</location>
    </error-page>

    <error-page>
        <error-code>403</error-code>
        <location>/error</location>
    </error-page>

    <error-page>
        <error-code>404</error-code>
        <location>/error</location>
    </error-page>

    <error-page>
        <error-code>500</error-code>
        <location>/error</location>
    </error-page>

    <error-page>
        <error-code>503</error-code>
        <location>/error</location>
    </error-page>

    <error-page>
        <exception-type>java.lang.Exception</exception-type>
        <location>/error</location>
    </error-page>

    <!-- JNDI Db resource -->
    <resource-ref id="ResourceRef_JahiaNormalDBConnection">
        <description>DB Connection</description>
        <res-ref-name>jdbc/jahia</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>

</web-app>